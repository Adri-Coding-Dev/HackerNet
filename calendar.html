<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HackLearn - Calendario</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="assets/HackLearn.png" alt="HackLearn Logo" style="width: 70px;height: 70px;">
                <span>HackLearn</span>
            </div>
            
            <div class="nav-search">
                <input type="text" id="search-input" placeholder="Buscar máquinas...">
                <button id="search-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.3-4.3"></path>
                    </svg>
                </button>
            </div>
            
            <div class="nav-actions">
                <button id="filter-toggle" class="btn-secondary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                    Filtros
                </button>
                <button class="btn-secondary" data-nav="index.html">Inicio</button>
                <!--
                <button class="btn-secondary" data-nav="profile.html">Perfil</button>
                -->
                <button class="btn-secondary" data-nav="roadmap.html">Roadmap</button>
                <button class="btn-secondary" data-nav="trophies.html">Trofeos</button>
                <button id="logout-btn" class="btn-primary">
                    Cerrar Sesión
                </button>
            </div>
        </div>
    </nav>

    <!-- Calendar Content -->
    <main class="main-content">
        <div class="calendar-page-container">
            <div class="calendar-header">
                <h1>Mi Calendario de Hacking</h1>
                <p>Planifica y organiza tus sesiones de resolución de máquinas</p>
                <div class="calendar-actions">
                    <button id="export-schedule" class="btn-secondary">Exportar Horario</button>
                    <button id="add-session" class="btn-primary">Nueva Sesión</button>
                </div>
            </div>

            <div class="calendar-layout">
                <!-- Main Calendar -->
                <div class="main-calendar">
                    <div id="full-calendar">
                        <!-- Full calendar will be populated by JavaScript -->
                        <div class="calendar-placeholder">
                            <p>Calendario interactivo (próximamente)</p>
                            <p>Aquí podrás ver todas tus máquinas programadas y planificar nuevas sesiones.</p>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="calendar-sidebar">
                    <div class="sidebar-section">
                        <h3>Hoy</h3>
                        <div class="day-view-controls">
                            <button id="prev-day" class="btn-secondary">Anterior</button>
                            <span id="day-view-date" class="day-view-date"></span>
                            <button id="next-day" class="btn-secondary">Siguiente</button>
                        </div>
                        <div id="day-machines-list" class="day-machines-list">
                            <!-- Machines scheduled for selected day -->
                        </div>
                    </div>
                    <div class="sidebar-section">
                        <h3>Próximas Sesiones</h3>
                        <div id="upcoming-sessions" class="sessions-list">
                            <!-- Upcoming sessions will be populated by JavaScript -->
                            <div class="empty-sessions">
                                <p>No hay sesiones programadas</p>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3>Estadísticas del Mes</h3>
                        <div class="month-stats">
                            <div class="stat">
                                <span class="stat-value" id="month-scheduled">0</span>
                                <span class="stat-label">Programadas</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value" id="month-completed">0</span>
                                <span class="stat-label">Completadas</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value" id="month-success">0%</span>
                                <span class="stat-label">Tasa de éxito</span>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3>Máquinas para Programar</h3>
                        <div id="available-machines" class="machines-list">
                            <!-- Available machines will be populated by JavaScript -->
                            <div class="empty-machines">
                                <p>Carga máquinas desde el dashboard</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/credentials.js"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/data.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/main.js"></script>
</body>
</html>